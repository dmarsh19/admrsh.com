{% extends "template.html" %}
{% block content %}
  <link href="/static/css/jquery-ui.css" rel="stylesheet">
  <div class="content container onepage">
    <h1 align="center">atmo</h1>

    <div class="row">
      <div class="col-md-6">
        <input type="text" class="form-control" id="startAt" placeholder="Start Date (MM/DD/YYYY)">
      </div>
      <div class="col-md-6">
        <input type="text" class="form-control" id="endAt" placeholder="End Date (MM/DD/YYYY)">
      </div>
    </div>
    <div class="col-sm-offset-2 col-sm-10">
      <button id="datepicker-submit" type="submit" class="btn btn-default">Submit</button>
    </div>

    <canvas id="lineChart" height="450" width="800"></canvas>

    <script src="/static/js/Chart.min.js"></script>
    <script src="/static/js/jquery-ui.min.js"></script>
    <script src="/static/js/atmo.js"></script>

    <script type=text/javascript>
      $(document).ready(function() {
        asyncDrawChart("{{ url_for('api.atmo') }}");
      });

      $("#datepicker-submit").on( "click", function() {
        var sd = startAt.datepicker( "getDate" ).toISOString(),
          ed = endAt.datepicker( "getDate" ).toISOString();
        asyncDrawChart("{{ url_for('api.atmo') }}?startAt=" + sd + "&endAt=" + ed);
      });
    </script>

  </div>
{% endblock %}
